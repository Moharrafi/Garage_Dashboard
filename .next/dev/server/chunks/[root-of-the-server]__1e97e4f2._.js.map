{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/gtavapor/lib/notifications.ts"],"sourcesContent":["import crypto from \"crypto\"\nimport type { NotificationItem } from \"@/lib/types\"\n\n/**\n * Notifications are now kept entirely in memory so they only live for the\n * lifetime of the running app. This keeps the UI responsive without needing\n * any database tables.\n */\nconst DEFAULT_PROFILE_ID = \"local-profile\"\n\nlet notifications: NotificationItem[] = [\n  {\n    id: crypto.randomUUID(),\n    profile_id: DEFAULT_PROFILE_ID,\n    title: \"Selamat datang kembali\",\n    message: \"Gunakan panel ini untuk mengelola stok dan progres unit bengkel.\",\n    type: \"info\",\n    is_read: false,\n    created_at: new Date(),\n  },\n  {\n    id: crypto.randomUUID(),\n    profile_id: DEFAULT_PROFILE_ID,\n    title: \"Servis mendekati batas\",\n    message: \"Unit CB150R milik Andi hampir selesai, cek statusnya untuk update terbaru.\",\n    type: \"warning\",\n    is_read: false,\n    created_at: new Date(),\n  },\n]\n\nfunction clone(list: NotificationItem[]) {\n  return list.map((notif) => ({ ...notif }))\n}\n\nexport async function createNotification(fields: Omit<NotificationItem, \"id\" | \"created_at\">) {\n  const notif: NotificationItem = {\n    id: crypto.randomUUID(),\n    created_at: new Date(),\n    ...fields,\n  }\n  notifications = [notif, ...notifications].slice(0, 100)\n  return { ...notif }\n}\n\nexport async function getNotifications() {\n  const ordered = [...notifications].sort((a, b) => b.created_at.getTime() - a.created_at.getTime())\n  return clone(ordered)\n}\n\nexport async function markNotificationRead(id: string, read: boolean) {\n  notifications = notifications.map((notif) => (notif.id === id ? { ...notif, is_read: read } : notif))\n}\n\nexport async function deleteNotification(id: string) {\n  notifications = notifications.filter((notif) => notif.id !== id)\n}\n\nexport async function deleteAllNotifications() {\n  notifications = []\n}\n\nexport async function markAllNotificationsRead() {\n  notifications = notifications.map((notif) => ({ ...notif, is_read: true }))\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAGA;;;;CAIC,GACD,MAAM,qBAAqB;AAE3B,IAAI,gBAAoC;IACtC;QACE,IAAI,gHAAM,CAAC,UAAU;QACrB,YAAY;QACZ,OAAO;QACP,SAAS;QACT,MAAM;QACN,SAAS;QACT,YAAY,IAAI;IAClB;IACA;QACE,IAAI,gHAAM,CAAC,UAAU;QACrB,YAAY;QACZ,OAAO;QACP,SAAS;QACT,MAAM;QACN,SAAS;QACT,YAAY,IAAI;IAClB;CACD;AAED,SAAS,MAAM,IAAwB;IACrC,OAAO,KAAK,GAAG,CAAC,CAAC,QAAU,CAAC;YAAE,GAAG,KAAK;QAAC,CAAC;AAC1C;AAEO,eAAe,mBAAmB,MAAmD;IAC1F,MAAM,QAA0B;QAC9B,IAAI,gHAAM,CAAC,UAAU;QACrB,YAAY,IAAI;QAChB,GAAG,MAAM;IACX;IACA,gBAAgB;QAAC;WAAU;KAAc,CAAC,KAAK,CAAC,GAAG;IACnD,OAAO;QAAE,GAAG,KAAK;IAAC;AACpB;AAEO,eAAe;IACpB,MAAM,UAAU;WAAI;KAAc,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,UAAU,CAAC,OAAO,KAAK,EAAE,UAAU,CAAC,OAAO;IAC/F,OAAO,MAAM;AACf;AAEO,eAAe,qBAAqB,EAAU,EAAE,IAAa;IAClE,gBAAgB,cAAc,GAAG,CAAC,CAAC,QAAW,MAAM,EAAE,KAAK,KAAK;YAAE,GAAG,KAAK;YAAE,SAAS;QAAK,IAAI;AAChG;AAEO,eAAe,mBAAmB,EAAU;IACjD,gBAAgB,cAAc,MAAM,CAAC,CAAC,QAAU,MAAM,EAAE,KAAK;AAC/D;AAEO,eAAe;IACpB,gBAAgB,EAAE;AACpB;AAEO,eAAe;IACpB,gBAAgB,cAAc,GAAG,CAAC,CAAC,QAAU,CAAC;YAAE,GAAG,KAAK;YAAE,SAAS;QAAK,CAAC;AAC3E"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/gtavapor/app/api/notifications/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse, type NextRequest } from \"next/server\"\nimport { deleteNotification, markNotificationRead } from \"@/lib/notifications\"\n\ninterface RouteParams {\n  params: { id: string }\n}\n\nexport async function PATCH(request: NextRequest, { params }: RouteParams) {\n  try {\n    const { read } = await request.json()\n    if (typeof read !== \"boolean\") {\n      return NextResponse.json({ message: \"Status notifikasi tidak valid\" }, { status: 400 })\n    }\n    await markNotificationRead(params.id, read)\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error(\"Failed to update notification:\", error)\n    return NextResponse.json({ message: \"Gagal memperbarui notifikasi\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(_: NextRequest, { params }: RouteParams) {\n  try {\n    await deleteNotification(params.id)\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error(\"Failed to delete notification:\", error)\n    return NextResponse.json({ message: \"Gagal menghapus notifikasi\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAMO,eAAe,MAAM,OAAoB,EAAE,EAAE,MAAM,EAAe;IACvE,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI;QACnC,IAAI,OAAO,SAAS,WAAW;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAgC,GAAG;gBAAE,QAAQ;YAAI;QACvF;QACA,MAAM,IAAA,8IAAoB,EAAC,OAAO,EAAE,EAAE;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;AACF;AAEO,eAAe,OAAO,CAAc,EAAE,EAAE,MAAM,EAAe;IAClE,IAAI;QACF,MAAM,IAAA,4IAAkB,EAAC,OAAO,EAAE;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF"}}]
}